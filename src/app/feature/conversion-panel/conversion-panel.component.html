<div class="conversion-panel-container">
    <app-card>
        <div class="rate-card-content">
            <div class="rate-info">
                <h2>Taxa de Câmbio Atual</h2>
                <div class="rate-display">
                    <span class="label">1 Ouro Real =</span>
                    <span class="rate-value" id="currentRate">{{ currentRate.toFixed(2) }}</span>
                    <span class="label">Tibar</span>
                </div>
                <p class="last-update">
                    Última atualização:
                    <span>
                        {{ lastUpdate | date: 'HH:mm' }}
                    </span>
                </p>
            </div>
            <button mat-raised-button class="close-button" color="primary" (click)="openRateModal()">Atualizar
                Taxa</button>
        </div>
    </app-card>
    <div class="conversion-grid">
        <mat-card class="conversion-card card-hover animate-slide-up">
            <h3 style="color: #fff;font-size: 25px;">Converter De</h3>
            <mat-form-field appearance="fill" class="full-width">
                <mat-select [(ngModel)]="fromCurrency" (selectionChange)="updateConversion()">
                    <mat-option value="OR">Ouro Real (OR)</mat-option>
                    <mat-option value="TB">Tibar (TB)</mat-option>
                </mat-select>
            </mat-form-field>
            <mat-label>Valor</mat-label>
            <mat-form-field appearance="fill" class="full-width">
                <input matInput type="number" placeholder="0.00" [(ngModel)]="fromAmount" (input)="updateConversion()"
                    min="0" />
            </mat-form-field>
            <div id="fromError" class="error-message" *ngIf="showError">Valor inválido</div>
        </mat-card>
        <mat-card class="conversion-card card-hover animate-slide-up">
            <h3 style="color: #fff;font-size: 25px;">Converter Para</h3>
            <mat-form-field appearance="fill" class="full-width">
                <mat-select [(ngModel)]="toCurrency" (selectionChange)="updateConversion()">
                    <mat-option value="TB">Tibar (TB)</mat-option>
                    <mat-option value="OR">Ouro Real (OR)</mat-option>
                </mat-select>
            </mat-form-field>
            <div class="converted-value-box">
                <label>Valor Convertido</label>
                <div class="converted-value">{{ toAmount }}</div>
            </div>
        </mat-card>
    </div>
    <div class="conversion-button animate-fade-in">
        <button mat-raised-button class="close-button" (click)="performConversion()"> Realizar Conversão</button>
    </div>
</div>